<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>POS Pro â€” Sistema de FacturaciÃ³n</title>
  <link rel="stylesheet" href="frontend/styles.css" />
</head>
<body>
  <header>
    <div class="logo" id="logo-area">
      <div class="logo-mark">ðŸ›’</div>
      <div>
        <div class="logo-text">POS<em>.pro</em></div>
        <div class="logo-company" id="header-company">Mi Empresa</div>
      </div>
    </div>
    <div class="header-center">
      <span class="chip" id="chip-user">Sin sesiÃ³n</span>
      <span class="chip" id="chip-plan">Plan</span>
      <span class="chip" id="chip-inv">0 productos</span>
      <span class="chip" id="chip-trial">Prueba: 0</span>
    </div>
    <div class="header-right">
      <button class="btn btn-ghost" id="btn-login">Cuenta</button>
      <button class="btn btn-ghost" id="btn-admin" hidden>Zona Admin</button>
      <button class="btn btn-danger" id="btn-logout" hidden>Salir</button>
    </div>
  </header>

  <div class="layout">
    <section class="left-panel">
      <div id="status-bar" class="status-bar waiting"><span class="dot"></span><span id="status-text">Inicia sesiÃ³n para operar.</span></div>
      <div class="scanner-wrap">
        <span class="scanner-icon">ðŸ“·</span>
        <input id="scanner-input" type="text" placeholder="Escanea o escribe cÃ³digo y presiona Enter" autocomplete="off" />
      </div>
      <div class="cart-section">
        <table>
          <thead><tr><th>CÃ³digo</th><th>Producto</th><th>Cant</th><th>P.Unit</th><th>Dcto</th><th>Sub</th><th></th></tr></thead>
          <tbody id="cart-body"><tr><td colspan="7" class="empty-msg"><span class="empty-icon">ðŸ§¾</span>Factura vacÃ­a</td></tr></tbody>
        </table>
      </div>
    </section>

    <aside class="right-panel">
      <div class="panel-tabs">
        <button class="tab-btn active" data-tab="pago">ðŸ’³ Pago</button>
        <button class="tab-btn" data-tab="inventario">ðŸ“¦ Inv.</button>
        <button class="tab-btn" data-tab="planes">ðŸ§© Planes</button>
        <button class="tab-btn" data-tab="historial">ðŸ“‹ Historial</button>
      </div>

      <div class="tab-content active" id="tab-pago">
        <div class="grid2">
          <input id="global-disc" type="number" value="0" min="0" max="100" placeholder="% dcto global" />
          <input id="fixed-disc" type="number" value="0" min="0" placeholder="$ dcto fijo" />
        </div>
        <div class="total-row"><span>Bruto</span><span id="t-gross">$0</span></div>
        <div class="total-row"><span>Dcto %</span><span id="t-disc">$0</span></div>
        <div class="total-row"><span>Dcto fijo</span><span id="t-fixed">$0</span></div>
        <div class="total-row"><span>Total descuento</span><span id="t-total-disc">$0</span></div>
        <hr class="total-divider">
        <div class="total-main"><span class="total-label-main">Total</span><span class="total-value-main" id="t-total">$0</span></div>
        <button class="btn-pay" id="btn-save">âœ“ Facturar Venta</button>
      </div>

      <div class="tab-content" id="tab-inventario">
        <div class="grid2">
          <input id="product-code" placeholder="CÃ³digo" />
          <input id="product-price" type="number" placeholder="Precio" />
          <input id="quick-name" placeholder="Nombre" />
          <input id="product-qty" type="number" min="1" value="1" />
          <input id="product-disc" type="number" min="0" max="100" value="0" placeholder="% dcto item" />
        </div>
        <button class="btn btn-accent" id="btn-add">Agregar al carrito</button>
        <div class="search-wrap"><input id="inv-search" placeholder="Buscar inventario" /></div>
        <div class="grid2">
          <input id="gs-url" placeholder="URL Google Sheets" />
          <input id="gs-gid" placeholder="gid opcional" />
        </div>
        <button class="btn btn-ghost" id="btn-gs-import">Importar Google Sheets</button>
        <div id="inv-list" class="inv-list"></div>
      </div>

      <div class="tab-content" id="tab-planes">
        <div id="plans-list"></div>
        <div class="grid2">
          <input id="pay-plan" placeholder="plan (trial/free/pro)" />
          <input id="pay-ref" placeholder="Referencia pago Nequi" />
        </div>
        <input id="pay-note" placeholder="Nota opcional" />
        <button class="btn btn-accent" id="btn-request-payment">Solicitar activaciÃ³n manual</button>
        <div id="plan-help" class="empty-msg">Cargando planes...</div>
      </div>

      <div class="tab-content" id="tab-historial">
        <button class="btn btn-ghost" id="btn-refresh-history">Actualizar</button>
        <div id="hist-list"></div>
      </div>
    </aside>
  </div>

  <div id="modal-auth" class="overlay hidden">
    <div class="modal">
      <div class="modal-head"><div><div class="modal-title">Inicio de sesiÃ³n</div><div class="modal-sub">SUPER ADMIN: usa contraseÃ±a o email + contraseÃ±a</div></div></div>
      <div class="modal-body">
        <select id="login-mode" class="field-input"><option value="user">merchant/admin</option><option value="super_admin">SUPER ADMIN</option></select>
        <input id="login-email" class="field-input" placeholder="Email o usuario" />
        <input id="login-pass" class="field-input" type="password" placeholder="Password" />
        <label style="display:flex;gap:8px;align-items:center;font-size:12px;color:var(--muted2)"><input id="remember-login" type="checkbox" checked style="width:auto" />Recordar usuario y contraseÃ±a</label>
        <div class="grid2"><button class="btn btn-ghost" id="fill-super">Autocompletar Super Usuario</button><button class="btn btn-ghost" id="fill-user">Autocompletar Usuario SEBASTIAN</button></div>
      </div>
      <div class="modal-footer"><button class="btn btn-ghost" id="close-auth">Cerrar</button><button class="btn btn-accent" id="do-login">Entrar</button></div>
    </div>
  </div>

  <div id="modal-admin" class="overlay hidden">
    <div class="modal">
      <div class="modal-head"><div><div class="modal-title">Zona Super Usuario</div></div></div>
      <div class="modal-body">
        <h4>Crear usuario</h4>
        <div class="grid2">
          <input id="new-name" class="field-input" placeholder="Nombre" />
          <input id="new-email" class="field-input" placeholder="Email" />
          <input id="new-pass" class="field-input" type="password" placeholder="Password" />
          <select id="new-role" class="field-input"><option value="merchant">merchant</option><option value="admin">admin</option></select>
        </div>
        <button class="btn btn-accent" id="create-user">Crear usuario</button>
        <h4>Usuarios creados</h4>
        <div id="users-list"></div>
        <h4>Solicitudes de pago</h4>
        <div id="payments-list"></div>
      </div>
      <div class="modal-footer"><button class="btn btn-ghost" id="close-admin">Cerrar</button></div>
    </div>
  </div>

  <div id="modal-alert" class="overlay hidden">
    <div class="modal small">
      <div class="modal-head"><div class="modal-title" id="alert-title">Aviso</div></div>
      <div class="modal-body"><p id="alert-message"></p></div>
      <div class="modal-footer"><button class="btn btn-ghost" id="alert-ok">Entendido</button></div>
    </div>
  </div>

  <script src="frontend/app.js"></script>
</body>
</html>
